2.6 调试
============

--------------
2.6.1 ADB 调试
--------------

.. _uart_debug-label:



2.6.1.1 USB ADB 调试
^^^^^^^^^^^^^^^^^^^^^^

评估板上有两个USB口，PWR口负责供电，DEBUG口连接电脑可以调试。调试时PWR口请连接附带的电源适配器供电。



2.6.1.2 WIFI ADB 调试
^^^^^^^^^^^^^^^^^^^^^^^

AIUI开机启动后会开启WIFI ADB功能，这样通过同网络下的电脑不用连USB也能ADB 调试AIUI模块。通过如下步骤：

1. 首先得到AIUI模块的IP，可以通过路由器查询或者IP扫描

2. ``adb connect aiui_ip:5555`` 提示连接成功

3. ``adb devices`` 即可看到设备


.. _audio_save-label:

---------------
2.6.2 音频保存
---------------

下面描述的音频保存的位置都是在AIUI模块的SD卡上。


2.6.2.1 原始音频
^^^^^^^^^^^^^^^^^^

通过手机端评估板控制端，扫描连接设备，进入控制端界面后依次点击  调试 -> 保存音频 即可最长保存3min的原始音频。

原始音频保存在\ ``/sdcard/AIUI/audio/raw``\ 中，**SD卡存储空间有限，请及时清理不需要的原始音频。**

2.6.2.2 识别音频
^^^^^^^^^^^^^^^^^^

识别音频是麦克风阵列算法对原始音频进行降噪处理后的16k 16bit单声道音频，该音频最终会送到云端进行识别。

通过修改配置文件中的::

	"log":{
		"debug_log":"1",
		"save_datalog":"1",
		"datalog_path":"",
		"datalog_size":1024,
		"raw_audio_path":""
	}
	
中的\ ``save_datalog``\ 置为1，即可把每次交互的识别音频保存下来，保存的位置位于/sdcard/AIUI/data/（此路径可以通过
datalog_path配置修改）下，每一次唤醒后的交互音频都保存在此目录下wakeXX开始的文件夹下。

all.pcm是本次唤醒后交互的全部识别音频，audio-x.pcm是经过本地vad切分后的识别音频，audio-x.txt是对应音频的结果信息。





