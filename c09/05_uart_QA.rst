-------------
9.5 常见问题
-------------

**Q:  串口消息构造后发送给AIUI，为什么没有执行对应操作（如发了合成命令，没有合成播放等）？**


	A： 没有执行对应操作可能的原因分三种：

			1. 消息格式构造问题

			2. 消息ID重复

			3. 消息内容构造问题

		对于上述三种原因可以按如下方法依次排查：

			1. 如果收到了AIUI对消息的确认消息，那说明消息构造没问题，反之应该检查下消息构造的格式是否有问题。

			2. 因为协议中\ :ref:`消息ID <uart_msg_id-label>`\ 的说明，AIUI会对消息ID与之前接受的200条消息ID进行比较，
			   如果有相同则认为是因确认超时重发的消息，而进行过滤，直接返回对应的确认消息，不会对消息进行解析处理。
			   
			   通过\ ``adb logcat -s UART_Manager:*``\ （adb连接参照\ :ref:`调试 <uart_debug-label>`\ ）查看AIUI串口的日志。
			   
			   如果log中有::
			   
					recv same data, send ack drop it !!!
			   
			   那说明消息ID与之前有重复，请检查消息ID的构造逻辑问题。
			   
			3. 消息内容的构造问题，请仔细对照\ :ref:`主控消息 <uart_control_msg-label>`\ 内定义的消息内容格式，
			   比如合成消息中的文本内容的编码格式要为utf-8。
   
**Q:  底板上有两个串口，AIUI使用了UART1，开发程序可以使用UART0吗？**

	A： UART0是AIUI的调试串口，不能正常读写，所以UART0不能使用。

		如果对AIUI本身的串口功能有依赖，第三方应用如果需要读写串口发送自己的数据内容，
		可以考虑使用\ :ref:`串口自定义 <uart_custome-label>`\ 的功能。

		如果对AIUI本身的串口功能无依赖，\ :ref:`AIUI软件内部关系 <demoboard_relationship-label>`\ 中
		ControlService负责串口通信，所以将ControlService卸载即可独立读写串口（不推荐）。




