5.6 录音处理
=================

5.6.1 Msg&Event
-------------------

**Message**
     +---------------------------+---------+------+--------------------------------------------------------------------------------------------+
     |msgType（消息类型）        |  取值   | 返回 | | 说明                                                                                     |
     +---------------------------+---------+------+--------------------------------------------------------------------------------------------+
     |CMD_START_THROW_AUDIO      |   18    |  无  | |  **开始抛出识别音频**                                                                    |
     |                           |         |      | |  调用之后，抛出\ ``EVENT_AUDIO``\ 事件。                                                 |
     |                           |         |      | |  arg1为拾音波束编号设置，若当前未唤醒则会使用该波束拾音，                                |
     |                           |         |      | |  若已经处于唤醒状态则arg1不起作用。                                                      |
     +---------------------------+---------+------+--------------------------------------------------------------------------------------------+
     |CMD_STOP_THROW_AUDIO       |   19    |  无  | |  **停止抛出识别音频**                                                                    |
     |                           |         |      | |  调用之后，停止抛出\ ``EVENT_AUDIO``\ 事件                                               |
     +---------------------------+---------+------+--------------------------------------------------------------------------------------------+
     |CMD_START_RECORD           |   22    |  无  | |  **开始录制数据**                                                                        |
     +---------------------------+---------+------+--------------------------------------------------------------------------------------------+
     |CMD_STOP_RECORD            |   23    |  无  | |  **停止录制数据**                                                                        |
     +---------------------------+---------+------+--------------------------------------------------------------------------------------------+

	
**Event**
	
     +---------------------+-------+-----------------------------------------------------------------------------------------------+
     |eventType(事件类型)  |  取值 |    | 说明                                                                                     |
     +---------------------+-------+-----------------------------------------------------------------------------------------------+
     |EVENT_AUDIO          |   9   |    | **音频抛出事件**                                                                         |
     |                     |       |    |                                                                                          |
     |                     |       |    | 16k音频数据在data中，通过键"audio"获取，示例：                                           |
     |                     |       |    | byte[] audio = event.data.getByteArray("audio");                                         |
     +---------------------+-------+-----------------------------------------------------------------------------------------------+
     |EVENT_START_RECORD   |   11  |    | **抛出该事件通知外部录音开始，用户可以开始说话**                                         |
     +---------------------+-------+-----------------------------------------------------------------------------------------------+
     |EVENT_STOP_RECORD    |   12  |    | **通知外部录音开始**                                                                     |
     +---------------------+-------+-----------------------------------------------------------------------------------------------+

.. _record_control-label:
	 
5.6.2 开始停止录音
-------------------

使用\ ``CMD_START_RECORD``\ 、\ ``CMD_STOP_RECORD``\ 控制录音开始和停止，当录音开始或结束时会抛出
\ ``EVENT_START_RECORD``\ 、\ ``EVENT_STOP_RECORD``\ 事件通知。
	 
注：params参数传\ ``data_type=audio``\ 。

5.6.3 保存原始音频
-------------------

参考\ :ref:`评估板保存原始音频 <audio_save-label>`\ 。

5.6.4 获取保存降噪音频
-------------------------

保存交互过程中的所有降噪音频和vad处理的音频，参考评估板保存降噪音频

如果需要实时获取降噪音频，通过\ ``CMD_START_THROW_AUDIO``\ ，\ ``CMD_STOP_THROW_AUDIO``\ 控制降噪后音频对外抛出。
AIUI通过\ ``EVENT_AUDIO``\ 返回降噪后音频。通过如下示例代码获取::

	byte[] audio = event.data.getByteArray("audio");  

如果是采用上位机方式集成，并不会收到\ ``EVENT_AUDIO``\ 事件，音频通过I2S设备写出。
